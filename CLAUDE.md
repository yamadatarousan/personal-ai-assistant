# Personal AI Assistant - 開発ルール

## 🎯 プロジェクト概要

### 目的
- スクリーンショット解析機能を持つデスクトップAIアシスタント
- 学習目的でモダンな技術スタックを習得
- 実用的なツールとして日常業務で活用

### ターゲットユーザー
- 開発者・デザイナー
- 画面作業が多いナレッジワーカー
- AIツールを効率化に活用したい人

## 🛠️ 技術スタック

### フロントエンド
- **Electron** - デスクトップアプリフレームワーク
- **React 18** + **TypeScript** - UI構築
- **Tailwind CSS** - スタイリング
- **Shadcn/ui** - UIコンポーネント
- **Zustand** - 状態管理

### AI統合
- **OpenAI GPT-4V** - 画像解析（メイン）
- **OpenAI GPT-4o** - テキスト生成
- 将来的に複数AI provider対応

### 開発ツール
- **TypeScript** - 型安全性
- **ESLint** + **Prettier** - コード品質
- **Vitest** - テスト（後で追加）

## 📋 開発フェーズ

### Phase 1: MVP（今週）
- [x] プロジェクト初期化
- [ ] Electronセットアップ
- [ ] 基本UI作成
- [ ] スクリーンショット機能
- [ ] OpenAI API統合
- [ ] 画像解析・結果表示

### Phase 2: 基本機能（来週）
- [ ] ホットキー対応
- [ ] 設定画面（API Key管理）
- [ ] 履歴機能
- [ ] エラーハンドリング

### Phase 3: 拡張機能（今後）
- [ ] OCR機能
- [ ] 音声入力
- [ ] カスタムプロンプト
- [ ] 複数AI provider

## 🎨 UI/UX 方針

### デザイン原則
- **シンプル** - 最小限のUI、直感的操作
- **高速** - ワンクリックで機能実行
- **非侵入的** - 作業の邪魔をしない
- **アクセシブル** - キーボード操作対応

### メインウィンドウ構成
```
┌─────────────────────────────────┐
│ Personal AI Assistant           │
├─────────────────────────────────┤
│ [📷 スクリーンショット]        │
│                                 │
│ ┌─────────────────────────────┐ │
│ │     画像プレビュー         │ │
│ └─────────────────────────────┘ │
│                                 │
│ ┌─────────────────────────────┐ │
│ │     AI解析結果             │ │
│ │                             │ │
│ └─────────────────────────────┘ │
│                                 │
│ [⚙️ 設定] [📝 履歴]            │
└─────────────────────────────────┘
```

## 🔧 開発ガイドライン

### コードスタイル
- **TypeScript strict mode** 必須
- **関数型コンポーネント** 使用
- **カスタムhooks** で状態ロジック分離
- **const assertions** でtype安全性向上

### ファイル構成
```
src/
├── main/           # Electronメインプロセス
├── renderer/       # Reactアプリ
│   ├── components/  # UIコンポーネント
│   ├── hooks/      # カスタムhooks
│   ├── stores/     # Zustand stores
│   ├── services/   # AI API, 外部サービス
│   └── types/      # TypeScript型定義
└── shared/         # 共通コード
```

### Commit規約
```bash
feat: 新機能追加
fix: バグ修正
docs: ドキュメント更新
style: コードフォーマット
refactor: リファクタリング
test: テスト追加・修正
chore: ビルド、設定変更
```

### エラーハンドリング
- **Try-catch** でAPI呼び出しを包む
- **Toast notification** でユーザーに通知
- **Fallback UI** で可能な限り動作継続
- **ログ機能** で問題追跡可能に

## 🔒 セキュリティ

### API Key管理
- ローカルストレージで暗号化保存
- 環境変数での設定もサポート
- API Keyの露出防止

### スクリーンショット
- 一時的なメモリ保存（永続化しない）
- ユーザー同意なしに送信しない
- 機密情報検出時の警告機能

## 🚀 ビルド・デプロイ

### 開発環境
```bash
npm run dev          # 開発サーバー起動
npm run type-check   # TypeScript型チェック
npm run lint         # ESLint実行
npm run format       # Prettier実行
```

### 本番ビルド
```bash
npm run build        # プロダクションビルド
npm run package      # アプリパッケージング
npm run dist         # 配布用ファイル作成
```

## 📊 パフォーマンス

### 目標値
- **アプリ起動**: 3秒以内
- **スクリーンショット**: 1秒以内
- **AI解析**: 10秒以内
- **メモリ使用量**: 200MB未満

### 最適化方針
- 画像圧縮でAPI通信量削減
- レスポンスキャッシュで重複処理回避
- バックグラウンド処理で UI応答性維持

## 🐛 テスト戦略

### テスト種別
- **Unit Test**: hooks, services
- **Integration Test**: AI API連携
- **E2E Test**: 主要ユーザーフロー

### テスト環境
- **開発**: Mock API使用
- **ステージング**: 実際のAI API
- **本番**: リリース前の最終確認

## 📝 ドキュメント

### 必須ドキュメント
- **README.md**: インストール・使用方法
- **CHANGELOG.md**: バージョン履歴
- **CONTRIBUTING.md**: 開発参加方法
- **API.md**: 内部API仕様

---

## 🎯 開発時の注意点

### Claude（AI）への指示
- 具体的なファイルパス・関数名で指定
- エラーメッセージは全文コピー
- 変更前後のコードを明確に区別
- テスト可能な小さい単位で実装

### 優先順位
1. **動作する最小限の機能**
2. **ユーザー体験の向上**
3. **コード品質・保守性**
4. **高度な機能追加**

---

**Built with ❤️ for learning and productivity**